<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0f1a" />
  <title>NEON/TASKS v0.4</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="assets/icon-192.png" />
  <link rel="apple-touch-icon" href="assets/icon-192.png" />
  <meta name="description" content="Cyberpunk, offline-first task manager with characters and boss fights." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Toast Layer -->
  <div id="toast-layer" aria-live="polite" aria-atomic="true"></div>

  <!-- Confirm Dialog -->
  <dialog id="confirm-reset" aria-labelledby="confirm-title" aria-describedby="confirm-desc">
    <h3 id="confirm-title">Reset all data?</h3>
    <p id="confirm-desc">This wipes your tasks, characters, and config. This cannot be undone.</p>
    <div class="dialog-actions">
      <button class="btn danger" id="reset-confirm-btn">Yes, wipe it</button>
      <button class="btn" id="reset-cancel-btn">Cancel</button>
    </div>
  </dialog>

  <!-- Lightbox -->
  <dialog id="lightbox" aria-label="Detail view">
    <div id="lightbox-content"></div>
    <button id="lightbox-close" class="btn">Close</button>
  </dialog>

  <!-- Header -->
  <header class="app-header" role="banner">
    <div class="logo" aria-label="App logo">NEON/<span>TASKS</span> <small>v0.4</small></div>
    <div class="powerbar" aria-label="Party Power">
      <div class="powerbar-label">Power <span id="power-perc">0%</span></div>
      <div class="powerbar-outer" aria-hidden="true"><div id="powerbar-inner"></div></div>
    </div>
  </header>

  <!-- Sticky Tabs -->
  <nav class="tabs" role="tablist" aria-label="Primary">
    <button role="tab" aria-selected="true" data-tab="summary" class="tab">Summary</button>
    <button role="tab" aria-selected="false" data-tab="create" class="tab">Create</button>
    <button role="tab" aria-selected="false" data-tab="tasks" class="tab">Tasks</button>
    <button role="tab" aria-selected="false" data-tab="calendar" class="tab">Calendar</button>
    <button role="tab" aria-selected="false" data-tab="characters" class="tab">Characters</button>
    <button role="tab" aria-selected="false" data-tab="boss" class="tab">Boss</button>
    <button role="tab" aria-selected="false" data-tab="config" class="tab">Config</button>
  </nav>

  <!-- Main -->
  <main id="views" tabindex="-1">
    <!-- 1) Summary -->
    <section id="view-summary" role="tabpanel" aria-labelledby="tab-summary">
      <div class="summary-grid" id="summary-grid" aria-live="polite"></div>
    </section>

    <!-- 2) Create -->
    <section id="view-create" role="tabpanel" hidden>
      <form id="quick-form" class="card" aria-label="Quick Create Task">
        <div class="field">
          <label for="q-title">Title <span aria-hidden="true" class="req">*</span></label>
          <input id="q-title" required maxlength="120" placeholder="e.g., 30 min run" />
        </div>
        <div class="row">
          <div class="field">
            <label for="q-due">Due date</label>
            <input id="q-due" type="date" />
          </div>
          <div class="field">
            <label for="q-priority">Priority</label>
            <select id="q-priority">
              <option>Low</option><option selected>Medium</option><option>High</option>
            </select>
          </div>
        </div>
        <div class="field">
          <label for="q-category">Category</label>
          <select id="q-category"></select>
        </div>
        <div class="field">
          <label for="q-notes">Notes</label>
          <textarea id="q-notes" rows="3" placeholder="Add details…"></textarea>
        </div>
        <div class="actions">
          <button type="submit" class="btn primary">Create Task</button>
          <button type="reset" class="btn">Clear</button>
        </div>
      </form>
    </section>

    <!-- 3) Tasks -->
    <section id="view-tasks" role="tabpanel" hidden>
      <div class="toolbar card">
        <input id="task-search" placeholder="Search tasks…" aria-label="Search tasks" />
        <div class="chips">
          <button class="chip" data-scope="today" aria-pressed="true">Today</button>
          <button class="chip" data-scope="week">Week</button>
          <button class="chip" data-scope="all">All</button>
        </div>
        <div class="selects">
          <label class="sel">
            <span class="sr-only">Sort by</span>
            <select id="task-sort">
              <option value="priority">Sort: Priority</option>
              <option value="due">Sort: Due date</option>
              <option value="created">Sort: Created</option>
            </select>
          </label>
        </div>
        <div class="category-pills" id="task-categories"></div>
        <div class="stats">
          <span id="stat-done">Done: 0</span>
          <span id="stat-today">Due Today: 0</span>
          <span id="stat-total">Total: 0</span>
        </div>
      </div>

      <div id="task-groups" class="task-groups" aria-live="polite"></div>

      <!-- FAB -->
      <button id="fab-add" class="fab" aria-label="Add Task">+</button>

      <!-- Add Task Dialog -->
      <dialog id="add-dialog" aria-label="Add Task">
        <form method="dialog" id="add-form">
          <h3>Add Task</h3>
          <div class="field">
            <label for="a-title">Title <span class="req">*</span></label>
            <input id="a-title" required maxlength="120" />
          </div>
          <div class="field">
            <label>Category</label>
            <div id="a-category-pills" class="pill-select"></div>
            <div id="a-character-preview" class="char-preview" aria-hidden="true"></div>
          </div>
          <div class="row">
            <div class="field">
              <label for="a-priority">Priority</label>
              <select id="a-priority">
                <option>Low</option><option selected>Medium</option><option>High</option>
              </select>
            </div>
            <div class="field">
              <label for="a-type">Type</label>
              <select id="a-type">
                <option value="oneoff">One-off</option>
                <option value="repeat">Repeat</option>
                <option value="multiday">Multi-day</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div class="field">
              <label for="a-start">Start</label>
              <input id="a-start" type="date" />
            </div>
            <div class="field">
              <label for="a-end">End</label>
              <input id="a-end" type="date" />
            </div>
          </div>
          <div class="row">
            <div class="field">
              <label for="a-est">Estimated hours</label>
              <input id="a-est" type="number" min="0" step="0.5" value="1" />
            </div>
            <div class="field">
              <label for="a-repeat">Repeat (days)</label>
              <input id="a-repeat" type="number" min="1" step="1" value="7" />
            </div>
          </div>
          <div class="field">
            <label for="a-notes">Notes</label>
            <textarea id="a-notes" rows="3"></textarea>
          </div>
          <div class="dialog-actions">
            <button class="btn primary" id="add-confirm">Add</button>
            <button class="btn" id="add-clear" type="reset">Clear</button>
            <button class="btn" id="add-cancel">Cancel</button>
          </div>
        </form>
      </dialog>
    </section>

    <!-- 4) Calendar -->
    <section id="view-calendar" role="tabpanel" hidden>
      <div class="calendar-header card">
        <div class="cal-controls">
          <button id="cal-prev" class="btn">Previous</button>
          <button id="cal-today" class="btn">Today</button>
          <button id="cal-next" class="btn">Next</button>
          <button id="cal-generate" class="btn primary">Generate recurring</button>
        </div>
        <h3 id="cal-title" aria-live="polite">Month YYYY</h3>
      </div>
      <div id="calendar-grid" class="calendar-grid" role="grid" aria-label="Monthly calendar"></div>
    </section>

    <!-- 5) Characters -->
    <section id="view-characters" role="tabpanel" hidden>
      <div id="chars-empty" class="card empty">No characters yet. Complete tasks to unlock your first ally!</div>
      <div id="chars-grid" class="chars-grid"></div>
    </section>

    <!-- 6) Boss -->
    <section id="view-boss" role="tabpanel" hidden>
      <div class="card boss-card">
        <div class="boss-head">
          <h3>Monthly Boss</h3>
          <div id="boss-meta" class="muted"></div>
        </div>
        <div class="powerbar">
          <div class="powerbar-label">Party Power <span id="party-perc">0%</span></div>
          <div class="powerbar-outer"><div id="party-inner"></div></div>
        </div>
        <div class="boss-stats">
          <div>Target Power: <strong id="boss-target">—</strong></div>
          <div>Estimated Win Chance: <strong id="boss-chance">—</strong></div>
        </div>
        <div class="boss-actions">
          <button id="btn-simulate" class="btn primary">Simulate Fight</button>
        </div>
        <div id="boss-result" class="boss-result"></div>
        <div class="card activity">
          <h4>Activity Breakdown</h4>
          <div id="activity-list"></div>
        </div>
      </div>
    </section>

    <!-- 7) Config -->
    <section id="view-config" role="tabpanel" hidden>
      <div class="card">
        <h3>XP Weights</h3>
        <div class="row">
          <div class="field">
            <label for="xp-preset">Preset</label>
            <select id="xp-preset">
              <option>Default</option>
              <option>Aggressive</option>
              <option>Gentle</option>
            </select>
          </div>
          <div class="field">
            <label for="xp-scale">Scaling Mode</label>
            <select id="xp-scale">
              <option>Linear</option>
              <option>Square root</option>
              <option>Log</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label for="boss-target-input">Boss Target Power</label>
            <input id="boss-target-input" type="number" min="10" step="10" />
          </div>
          <div class="field">
            <button id="apply-target" class="btn">Apply</button>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Data Controls</h3>
        <div class="row">
          <button id="seed-demo" class="btn">Seed demo data</button>
          <button id="reset-all" class="btn danger">Reset all</button>
        </div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>